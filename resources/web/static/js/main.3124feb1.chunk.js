(this["webpackJsonpelementum-web"]=this["webpackJsonpelementum-web"]||[]).push([[0],{169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(57),i=n.n(a),s=n(15),l=n.n(s),o=n(32),j=n(26),u=n(197),d=n(143),b=n(2),h=function(e){var t=e.downloading,n=e.finished,r=e.total;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(d.a.Group,{widths:"3",children:[Object(b.jsxs)(d.a,{children:[Object(b.jsx)(d.a.Value,{children:t}),Object(b.jsx)(d.a.Label,{children:"Downloading"})]}),Object(b.jsxs)(d.a,{children:[Object(b.jsx)(d.a.Value,{children:n}),Object(b.jsx)(d.a.Label,{children:"Finished"})]}),Object(b.jsxs)(d.a,{children:[Object(b.jsx)(d.a.Value,{children:r}),Object(b.jsx)(d.a.Label,{children:"Total"})]})]})})},x=n(65),O=n(137),f=n(140),p=n(196),v=n(190),g=n(189),m=n(64),w=n(186),C=[{text:"Movies",value:"Movies",icon:"film"},{text:"TV Shows",value:"TvShows",icon:"tv"},{text:"General",value:"General",icon:"magnet"}],y={loading:!1,results:[],value:""};function k(e,t){switch(t.type){case"CleanQuery":return y;case"StartSearch":return Object(x.a)(Object(x.a)({},e),{},{loading:!0,value:t.query});case"FinishSearch":return Object(x.a)(Object(x.a)({},e),{},{loading:!1,results:t.results});case"UpdateSelection":return Object(x.a)(Object(x.a)({},e),{},{value:t.selection})}}var S=function(e){var t,n,r,c,a=e;return Object(b.jsx)(O.a,{children:Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Image,{size:"small",src:a.image}),Object(b.jsxs)(f.a.Content,{children:[Object(b.jsx)(f.a.Header,{children:a.title}),Object(b.jsx)(f.a.Meta,{children:a.tagline}),Object(b.jsx)(f.a.Description,{children:a.description}),"season"!==a.mediatype&&Object(b.jsx)(f.a.Extra,{children:"".concat(a.rating," - ").concat(null===(t=a.genre)||void 0===t?void 0:t.join(", ")," - ").concat(null!==(n=null!==(r=null===(c=a.date)||void 0===c?void 0:c.toString())&&void 0!==r?r:a.year)&&void 0!==n?n:"-")})]})]})})};function F(e){switch(e){case"Movies":return"movies";case"TvShows":return"shows";case"General":return"."}}function T(e,t){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:c=e.sent.items,n({type:"FinishSearch",results:c.filter((function(e){return void 0!==e.info})).map((function(e){return{image:e.art.thumb,key:e.info.code,description:e.info.plotoutline,title:e.label,tagline:e.info.tagline,year:e.info.year,date:e.info.date,genre:e.info.genre,rating:e.info.rating,mediatype:e.info.mediatype,path:e.path}}))});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){var t=e.totalDownloadRate,n=e.totalUploadRate,c=Object(r.useState)("Movies"),a=Object(j.a)(c,2),i=a[0],s=a[1],u=Object(r.useRef)(),h=Object(r.useReducer)(k,y),x=Object(j.a)(h,2),O=x[0],f=x[1],H=O.loading,A=O.results,R=O.value,z=Object(w.a)(function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(i),e.next=3,T("/".concat(n,"/search?q=").concat(t),f);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300),D=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f({type:"StartSearch",query:t}),0!==t.trim().length){e.next=4;break}return f({type:"CleanQuery"}),e.abrupt("return");case 4:return e.next=6,z(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.path.replace("plugin://plugin.video.elementum/",""),r="/".concat(n,"?external=1"),e.t0=i,e.next="Movies"===e.t0?5:"TvShows"===e.t0?8:"General"===e.t0?18:19;break;case 5:return e.next=7,fetch(r);case 7:return e.abrupt("break",19);case 8:if(f({type:"StartSearch",query:R}),!n.includes("links")){e.next=14;break}return e.next=12,fetch(r);case 12:e.next=17;break;case 14:return e.next=16,T(r,f);case 16:u.current.open();case 17:case 18:return e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{padded:!0,stackable:!0,columns:"3",children:Object(b.jsxs)(p.a.Row,{children:[Object(b.jsx)(p.a.Column,{width:"11",children:Object(b.jsx)(p.a,{children:Object(b.jsxs)(p.a.Row,{children:[Object(b.jsx)(p.a.Column,{mobile:"7",computer:"4",children:Object(b.jsx)(v.a,{fluid:!0,selection:!0,options:C,defaultValue:C[0].value,onChange:function(e,t){return n=t.value,s(n),void f({type:"CleanQuery"});var n}})}),Object(b.jsx)(p.a.Column,{mobile:"9",computer:"12",children:Object(b.jsx)(g.a,{fluid:!0,placeholder:"Search",loading:H,results:A,value:R,onSearchChange:function(e,t){var n;return D(null!==(n=t.value)&&void 0!==n?n:"")},resultRenderer:S,onResultSelect:function(e,t){return P(t.result)},ref:u,minCharacters:3})})]})})}),Object(b.jsx)(p.a.Column,{width:"5",children:Object(b.jsxs)(d.a.Group,{widths:"2",size:"tiny",children:[Object(b.jsx)(d.a,{children:Object(b.jsxs)(d.a.Value,{children:[Object(b.jsx)(m.a,{name:"arrow down",size:"small"})," ".concat(t.toFixed(1)," kB/s")]})}),Object(b.jsx)(d.a,{children:Object(b.jsxs)(d.a.Value,{children:[Object(b.jsx)(m.a,{name:"arrow up",size:"small"})," ".concat(n.toFixed(1)," kB/s")]})})]})})]})})})},R=n(142),z=n(193),D=n(199),P=n(192),_=n(171),I=function(e){var t=e.torrentIdsToDelete,n=Object(r.useState)(!1),c=Object(j.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(!1),l=Object(j.a)(s,2),o=l[0],u=l[1];return Object(b.jsxs)(P.a,{onClose:function(){return i(!1)},onOpen:function(){return i(!0)},open:a,trigger:Object(b.jsx)(_.a,{content:"Delete"}),children:[Object(b.jsx)(P.a.Header,{children:"Delete Torrent"}),Object(b.jsx)(P.a.Content,{children:Object(b.jsxs)(P.a.Description,{children:["Are you sure?",Object(b.jsx)("br",{}),Object(b.jsx)(D.a,{toggle:!0,label:"Also delete files",onChange:function(e,t){var n;return u(null!==(n=t.checked)&&void 0!==n&&n)}})]})}),Object(b.jsxs)(P.a.Actions,{children:[Object(b.jsx)(_.a,{content:"No",icon:"undo",onClick:function(){return i(!1)}}),Object(b.jsx)(_.a,{content:"Yes",icon:"trash",color:"red",onClick:function(){return t.map((function(e){return fetch("/torrents/delete/".concat(e,"?files=").concat(o))})),void i(!1)}})]})]})},M=n(191);var B=function(){var e=c.a.useState(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),i=Object(j.a)(a,2),s=i[0],u=i[1],d=c.a.useState(),h=Object(j.a)(d,2),x=h[0],O=h[1];function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(l.a.mark((function e(t,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("uri",s),c.append("file",null!==x&&void 0!==x?x:"null"),null===n||void 0===n||n.forEach((function(e){return c.append(e[0],e[1])})),e.next=6,fetch(t,{method:"POST",body:c});case 6:r(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(P.a,{onClose:function(){return r(!1)},onOpen:function(){return r(!0)},open:n,trigger:Object(b.jsxs)(_.a,{icon:!0,labelPosition:"left",floated:"right",primary:!0,children:[Object(b.jsx)(m.a,{name:"download"}),"Add Torrent"]}),children:[Object(b.jsx)(P.a.Header,{children:"Add Torrent"}),Object(b.jsx)(P.a.Content,{children:Object(b.jsx)(P.a.Description,{children:Object(b.jsxs)(M.a,{children:[Object(b.jsx)(M.a.Input,{placeholder:"Magnet or Torrent file URL",onChange:function(e){return u(e.target.value)}}),Object(b.jsx)(M.a.Input,{type:"file",accept:".torrent",onChange:function(e){var t,n;return O(null!==(t=null===(n=e.target.files)||void 0===n?void 0:n.item(0))&&void 0!==t?t:void 0)}})]})})}),Object(b.jsxs)(P.a.Actions,{children:[Object(b.jsx)(_.a,{content:"Cancel",color:"red",onClick:function(){return r(!1)}}),Object(b.jsx)(_.a,{content:"Add (all files)",labelPosition:"left",icon:"download",color:"yellow",onClick:function(){return f("/torrents/add",[["all","1"]])}}),Object(b.jsx)(_.a,{content:"Add",labelPosition:"left",icon:"download",color:"blue",onClick:function(){return f("/torrents/add")}}),Object(b.jsx)(_.a,{content:"Stream",labelPosition:"left",icon:"play",color:"green",onClick:function(){return f("/playuri")}})]})]})},V=n(188),G=n(194),L=n(93),E=n(136),q=n(125),N=function(e){var t=e.torrent,n=e.onTorrentSelected,r="Finished"!==t.status&&"Paused"!==t.status,c=r?"green":"grey",a=function(){var e=Object(o.a)(l.a.mark((function e(n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.checked,a=c?"resume":"pause",e.next=4,fetch("/torrents/".concat(a,"/").concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(l.a.mark((function e(n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/playuri?resume=".concat(t.id));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(z.a.Row,{children:[Object(b.jsx)(z.a.Cell,{collapsing:!0,textAlign:"center",children:Object(b.jsx)(D.a,{toggle:!0,onChange:a,checked:r})}),Object(b.jsx)(z.a.Cell,{collapsing:!0,textAlign:"center",children:Object(b.jsx)(D.a,{onChange:function(e,r){var c;return n(t.id,null!==(c=r.checked)&&void 0!==c&&c)},checked:t.is_selected})}),Object(b.jsx)(z.a.Cell,{collapsing:!0,children:Object(b.jsx)(_.a,{color:"green",icon:"play",floated:"right",onClick:i})}),Object(b.jsx)(z.a.Cell,{children:t.name}),Object(b.jsx)(z.a.Cell,{children:Object(b.jsx)(V.a,{content:"".concat(t.progress.toFixed(2),"%"),trigger:Object(b.jsx)(G.a,{percent:t.progress,autoSuccess:!0,size:"small"})})}),Object(b.jsx)(z.a.Cell,{collapsing:!0,textAlign:"center",children:Object(b.jsx)(L.a,{color:c,children:t.status})}),Object(b.jsx)(z.a.Cell,{children:Object(b.jsxs)(E.a,{widths:"3",size:"mini",children:[Object(b.jsx)(d.a,{value:t.ratio.toFixed(2),label:"Seed ratio"}),Object(b.jsx)(d.a,{value:t.time_ratio.toFixed(2),label:"Time ratio"}),Object(b.jsx)(d.a,{value:"".concat(t.seed_time,"s"),label:"Seed time"})]})}),Object(b.jsx)(z.a.Cell,{textAlign:"center",children:Object(b.jsx)(L.a,{children:t.size})}),Object(b.jsx)(z.a.Cell,{children:Object(b.jsxs)(E.a,{widths:"2",size:"mini",children:[Object(b.jsx)(d.a,{children:Object(b.jsxs)(q.a,{children:[Object(b.jsx)(m.a,{name:"arrow down",size:"small"})," ".concat(t.download_rate.toFixed(2)," kB/s")]})}),Object(b.jsx)(d.a,{children:Object(b.jsxs)(q.a,{children:[Object(b.jsx)(m.a,{name:"arrow up",size:"small"})," ".concat(t.upload_rate.toFixed(2)," kB/s")]})})]})}),Object(b.jsx)(z.a.Cell,{children:Object(b.jsxs)(E.a,{widths:"2",size:"mini",children:[Object(b.jsx)(d.a,{value:t.seeders,label:"Active"}),Object(b.jsx)(d.a,{value:t.seeders_total,label:"Total"})]})}),Object(b.jsx)(z.a.Cell,{children:Object(b.jsxs)(E.a,{widths:"2",size:"mini",children:[Object(b.jsx)(d.a,{value:t.peers,label:"Active"}),Object(b.jsx)(d.a,{value:t.peers_total,label:"Total"})]})})]})})},U=function(e){var t=e.torrents,n=Object(r.useState)([]),c=Object(j.a)(n,2),a=c[0],i=c[1],s=t.map((function(e){return e.is_selected=a.includes(e.id),e})),l=function(e,t){i(t?[].concat(Object(R.a)(a),[e]):a.filter((function(t){return t!==e})))};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(z.a,{celled:!0,definition:!0,compact:!0,stackable:!0,children:[Object(b.jsx)(z.a.Header,{className:"mobile-hidden",children:Object(b.jsxs)(z.a.Row,{children:[Object(b.jsx)(z.a.HeaderCell,{}),Object(b.jsx)(z.a.HeaderCell,{children:Object(b.jsx)(D.a,{onChange:function(e,n){var r,c;return c=null!==(r=n.checked)&&void 0!==r&&r,void i(c?t.map((function(e){return e.id})):[])},checked:s.every((function(e){return e.is_selected}))})}),Object(b.jsx)(z.a.HeaderCell,{}),Object(b.jsx)(z.a.HeaderCell,{children:"Name"}),Object(b.jsx)(z.a.HeaderCell,{children:"Progres"}),Object(b.jsx)(z.a.HeaderCell,{children:"Status"}),Object(b.jsx)(z.a.HeaderCell,{children:"Ratios"}),Object(b.jsx)(z.a.HeaderCell,{children:"Size"}),Object(b.jsx)(z.a.HeaderCell,{children:"Rates"}),Object(b.jsx)(z.a.HeaderCell,{children:"Seeds"}),Object(b.jsx)(z.a.HeaderCell,{children:"Peers"})]})}),Object(b.jsx)(z.a.Body,{children:s.map((function(e){return Object(b.jsx)(N,{torrent:e,onTorrentSelected:l},e.id)}))}),Object(b.jsx)(z.a.Footer,{fullWidth:!0,children:Object(b.jsxs)(z.a.Row,{children:[Object(b.jsx)(z.a.HeaderCell,{}),Object(b.jsxs)(z.a.HeaderCell,{colSpan:10,children:[Object(b.jsx)(B,{}),Object(b.jsx)(I,{torrentIdsToDelete:a})]})]})})]})})},Q=(n(168),n.p+"static/media/header.615133c9.jpg"),J=n.p+"static/media/logo.949a48f5.png";n(169);var W=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/torrents/list");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),setInterval((function(){e()}),5e3)}),[]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(u.a,{children:Object(b.jsx)("div",{style:{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.33), rgba(0, 0, 0, 0.33)), url("'.concat(Q,'")'),backgroundSize:"cover",backgroundPosition:"top",height:"150px",padding:"20px",textAlign:"center"},children:Object(b.jsx)("a",{href:"/web",children:Object(b.jsx)("img",{src:J,alt:"Elementum",height:"100%"})})})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(h,{downloading:n.filter((function(e){return"Finished"!==e.status})).length,finished:n.filter((function(e){return"Finished"===e.status})).length,total:n.length}),Object(b.jsx)(A,{totalDownloadRate:n.reduce((function(e,t){return e+t.download_rate}),0),totalUploadRate:n.reduce((function(e,t){return e+t.upload_rate}),0)}),Object(b.jsx)(U,{torrents:n})]})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root")),Y()}},[[170,1,2]]]);
//# sourceMappingURL=main.3124feb1.chunk.js.map