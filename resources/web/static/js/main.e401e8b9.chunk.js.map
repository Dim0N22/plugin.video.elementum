{"version":3,"sources":["Services/settings.ts","static/logo.png","menu/index.tsx","search-bar/index.tsx","delete-modal/index.tsx","upload-modal/index.tsx","torrents-list/torrent/index.tsx","torrents-list/index.tsx","torrent-info/piece-map.tsx","torrent-info/index.tsx","App.tsx","index.tsx"],"names":["refreshRateSettingName","getRefreshRate","refreshRate","window","localStorage","getItem","Number","HeaderMenu","useState","refreshRateInSeconds","setRefreshRate","Menu","borderless","color","style","border","Item","header","as","href","Image","size","src","logo","Modal","trigger","position","closeIcon","Header","content","Content","Form","Group","inline","Field","htmlFor","Input","type","min","labelPosition","value","onChange","_event","data","id","Label","Actions","Button","onClick","SaveSettings","_data","saveRefreshRate","refreshRateInMs","setItem","toString","location","reload","positive","torrentTypes","text","icon","initialState","loading","results","queryReducer","state","action","query","selection","resultRenderer","item","result","ItemGroup","image","title","Meta","tagline","Description","description","mediatype","Extra","rating","genre","join","date","year","getSearchType","torrentType","querySearchResults","url","dispatch","a","fetch","response","json","items","filter","i","undefined","info","map","art","thumb","key","code","label","plotoutline","path","Statistics","totalDownloadRate","totalUploadRate","active","finished","total","setTorrentType","searcRef","useRef","useReducer","debounceSearchChange","useDebouncedCallback","searchType","handleQueryChange","trim","length","handleResultSelect","replace","includes","current","open","Grid","padded","stackable","columns","Row","verticalAlign","Column","floated","Search","fluid","placeholder","onSearchChange","_","onResultSelect","ref","minCharacters","input","Dropdown","options","defaultValue","handleTorrentTypeChange","torrentTypeValue","width","Statistic","widths","Value","Icon","name","toFixed","DeleteTorrentModal","torrentIdsToDelete","setOpen","deleteFiles","setDeleteFiles","hasSelectedTorrents","onClose","Popup","display","disabled","closeOnTriggerClick","inverted","Message","negative","Checkbox","e","checked","deleteSelectedTorrents","UploadTorrentModal","React","uri","setUri","file","setFile","addTorrent","additionalData","formData","FormData","append","forEach","x","method","body","onOpen","primary","target","accept","files","TorrentListItem","torrent","isClicked","isChecked","onSelect","isActive","status","statusLabelColor","onResumePause","event","stopPropagation","onPlay","Table","Cell","collapsing","textAlign","toggle","onCheckboxClick","progress","Progress","percent","autoSuccess","StatisticGroup","ratio","seeding_time","time_ratio","StatisticValue","download_rate","upload_rate","seeders","seeders_total","peers","peers_total","memo","isEqual","TorrentList","torrents","activeTorrent","onSetActiveTorrent","selectedTorrents","setSelectedTorrents","onTorrentSelected","useCallback","torrentId","st","t","compact","className","HeaderCell","onAllTorrentsSelected","Body","Footer","fullWidth","colSpan","PieceMap","pieces","canvasRef","parentDivRef","useResizeObserver","useDebounce","trailing","debouncedWidth","useEffect","canvas","context","getContext","parentDiv","draw","parentWidth","clientWidth","piecesPerLine","Math","floor","PieceSize","height","ceil","pieceColor","fillStyle","fillRect","renderFileTree","fileTree","getFileTree","tree","f","parentNode","pathChunk","List","renderTree","Object","keys","k","isFolder","TorrentInfo","filesList","setFilesList","piecesList","setPiecesList","setLoading","getInfo","regexp","RegExp","match","exec","groups","split","p","intervalHandle","setInterval","clearInterval","panes","menuItem","render","Tab","Pane","GridRow","GridColumn","App","setTorrents","setActiveTorrent","getList","fetchedTorrents","reduce","rate","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e401e8b9.chunk.js","sourcesContent":["const refreshRateSettingName = 'refreshRate';\nconst defaultRefreshRate = 5000;\n\nexport const saveRefreshRate = (refreshRate: number): void => {\n  const refreshRateInMs = refreshRate;\n  window.localStorage.setItem(refreshRateSettingName, refreshRateInMs.toString());\n};\n\nexport const getRefreshRate = (): number => {\n  const refreshRate = window.localStorage.getItem(refreshRateSettingName);\n  return Number(refreshRate ?? defaultRefreshRate);\n};\n","export default __webpack_public_path__ + \"static/media/logo.4754a3cb.png\";","import React, { useState } from 'react';\nimport { Menu, Image, Modal, Form, Label, Input, Button } from 'semantic-ui-react';\nimport { saveRefreshRate, getRefreshRate } from '../Services/settings';\nimport logo from '../static/logo.png';\n\nconst HeaderMenu = (): JSX.Element => {\n  const [refreshRateInSeconds, setRefreshRate] = useState<number>(() => getRefreshRate() / 1000);\n\n  const SaveSettings = (_event: unknown, _data: unknown) => {\n    const refreshRate = refreshRateInSeconds < 1 ? 1 : refreshRateInSeconds;\n    saveRefreshRate(refreshRate * 1000);\n    window.location.reload();\n  };\n\n  return (\n    <Menu borderless color=\"green\" style={{ border: 'none' }}>\n      <Menu.Item header as=\"a\" href=\"/web\">\n        <Image size=\"mini\" src={logo} />\n        Elementum\n      </Menu.Item>\n      <Modal trigger={<Menu.Item position=\"right\">Settings</Menu.Item>} closeIcon>\n        <Modal.Header content=\"Settings\" />\n        <Modal.Content>\n          <Form>\n            <Form.Group inline>\n              <Form.Field>\n                <label htmlFor=\"refresh-rate\">Refresh rate:</label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  labelPosition=\"right\"\n                  value={refreshRateInSeconds}\n                  onChange={(_event, data) => setRefreshRate(Number(data.value))}\n                >\n                  <input id=\"refresh-rate\" />\n                  <Label>Seconds</Label>\n                </Input>\n              </Form.Field>\n            </Form.Group>\n          </Form>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={SaveSettings} positive>\n            Save\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    </Menu>\n  );\n};\n\nexport default HeaderMenu;\n","import React, { FC, useReducer, useRef, useState } from 'react';\nimport { Dropdown, DropdownItemProps, Grid, Icon, Item, ItemGroup, Search, SearchResultProps, Statistic } from 'semantic-ui-react';\nimport { useDebouncedCallback } from 'use-debounce';\n\nconst debounceWaitTime = 300;\n\ntype TorrentType = 'Movies' | 'TvShows' | 'General';\nconst torrentTypes: DropdownItemProps[] = [\n  {\n    text: 'Movies',\n    value: 'Movies',\n    icon: 'film',\n  },\n  {\n    text: 'TV Shows',\n    value: 'TvShows',\n    icon: 'tv',\n  },\n  {\n    text: 'General',\n    value: 'General',\n    icon: 'magnet',\n  },\n];\n\ntype Action =\n  | { type: 'CleanQuery' }\n  | { type: 'StartSearch'; query: string }\n  | { type: 'FinishSearch'; results: ResultView[] }\n  | { type: 'UpdateSelection'; selection: string };\n\ntype MediaType = 'movie' | 'tvshow' | 'season' | 'episode';\ninterface Info {\n  plotoutline: string;\n  tagline: string;\n  code: string;\n  year: number;\n  rating: number;\n  genre: string[];\n  date: Date;\n  mediatype: MediaType;\n}\n\ninterface Art {\n  thumb: string;\n}\n\ninterface Result {\n  label: string;\n  info: Info;\n  art: Art;\n  path: string;\n  is_playable: boolean;\n}\n\ninterface ResultView {\n  title: string;\n  tagline: string;\n  description: string;\n  year: number;\n  rating: number;\n  genre: string[];\n  date: Date;\n  image: string;\n  path: string;\n  mediatype: MediaType;\n  key: string;\n}\n\ninterface State {\n  loading: boolean;\n  results: ResultView[];\n  value: string;\n}\n\nconst initialState: State = {\n  loading: false,\n  results: [],\n  value: '',\n};\n\nfunction queryReducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'CleanQuery':\n      return initialState;\n    case 'StartSearch':\n      return { ...state, loading: true, value: action.query };\n    case 'FinishSearch':\n      return { ...state, loading: false, results: action.results };\n    case 'UpdateSelection':\n      return { ...state, value: action.selection };\n  }\n}\n\nconst resultRenderer = (item: SearchResultProps) => {\n  const result = item as ResultView;\n  return (\n    <ItemGroup>\n      <Item>\n        <Item.Image size=\"small\" src={result.image} />\n        <Item.Content>\n          <Item.Header>{result.title}</Item.Header>\n          <Item.Meta>{result.tagline}</Item.Meta>\n          <Item.Description>{result.description}</Item.Description>\n          {result.mediatype !== 'season' && (\n            <Item.Extra>{`${result.rating} - ${result.genre?.join(', ')} - ${result.date?.toString() ?? result.year ?? '-'}`}</Item.Extra>\n          )}\n        </Item.Content>\n      </Item>\n    </ItemGroup>\n  );\n};\n\nfunction getSearchType(torrentType: TorrentType): string {\n  switch (torrentType) {\n    case 'Movies':\n      return 'movies';\n    case 'TvShows':\n      return 'shows';\n    case 'General':\n      return '.';\n  }\n}\n\nasync function querySearchResults(url: string, dispatch: React.Dispatch<Action>) {\n  const response = await fetch(url);\n  const items = (await response.json()).items as Result[];\n\n  dispatch({\n    type: 'FinishSearch',\n    results: items\n      .filter((i) => i.info !== undefined)\n      .map((i) => ({\n        image: i.art.thumb,\n        key: `${i.info.code}-${i.label}`,\n        description: i.info.plotoutline,\n        title: i.label,\n        tagline: i.info.tagline,\n        year: i.info.year,\n        date: i.info.date,\n        genre: i.info.genre,\n        rating: i.info.rating,\n        mediatype: i.info.mediatype,\n        path: i.path,\n      })),\n  });\n}\n\ninterface IStatisticsProps {\n  /**\n   * Total download rate in kB/s\n   */\n  totalDownloadRate: number;\n\n  /**\n   * Total upload rate in kB/s\n   */\n  totalUploadRate: number;\n\n  /**\n   * Active torrents\n   */\n  active: number;\n\n  /**\n   * Finished torrents\n   */\n  finished: number;\n\n  /**\n   * Total torrents\n   */\n  total: number;\n}\n\nconst Statistics: FC<IStatisticsProps> = ({ totalDownloadRate, totalUploadRate, active, finished, total }: IStatisticsProps) => {\n  const [torrentType, setTorrentType] = useState<TorrentType>('Movies');\n  const searcRef = useRef<any>();\n  const [state, dispatch] = useReducer(queryReducer, initialState);\n  const { loading, results, value } = state;\n\n  const debounceSearchChange = useDebouncedCallback(async (query: string) => {\n    const searchType = getSearchType(torrentType);\n\n    await querySearchResults(`/${searchType}/search?q=${query}`, dispatch);\n  }, debounceWaitTime);\n\n  const handleQueryChange = async (query: string) => {\n    dispatch({\n      type: 'StartSearch',\n      query,\n    });\n\n    if (query.trim().length === 0) {\n      dispatch({\n        type: 'CleanQuery',\n      });\n      return;\n    }\n\n    await debounceSearchChange(query);\n  };\n\n  const handleResultSelect = async (data: ResultView): Promise<void> => {\n    const path = data.path.replace('plugin://plugin.video.elementum/', '');\n    const url = `/${path}?external=1`;\n\n    switch (torrentType) {\n      case 'Movies':\n        await fetch(url);\n        break;\n      case 'TvShows': {\n        dispatch({\n          type: 'StartSearch',\n          query: value,\n        });\n\n        if (path.includes('links')) {\n          await fetch(url);\n        } else {\n          await querySearchResults(url, dispatch);\n          searcRef.current.open();\n        }\n        break;\n      }\n      case 'General':\n        break;\n    }\n  };\n\n  const handleTorrentTypeChange = (torrentTypeValue: TorrentType) => {\n    setTorrentType(torrentTypeValue);\n    dispatch({\n      type: 'CleanQuery',\n    });\n  };\n\n  return (\n    <>\n      <Grid padded=\"horizontally\" stackable columns=\"3\">\n        <Grid.Row verticalAlign=\"middle\">\n          <Grid.Column floated=\"left\">\n            <Search\n              fluid\n              placeholder=\"Search\"\n              loading={loading}\n              results={results}\n              value={value}\n              onSearchChange={(_, data) => handleQueryChange(data.value ?? '')}\n              resultRenderer={resultRenderer}\n              onResultSelect={(_, data) => handleResultSelect(data.result)}\n              ref={searcRef}\n              minCharacters={3}\n              input={{\n                icon: 'search',\n                action: (\n                  <Dropdown\n                    fluid\n                    selection\n                    options={torrentTypes}\n                    defaultValue={torrentTypes[0].value}\n                    onChange={(_, data) => handleTorrentTypeChange(data.value as TorrentType)}\n                  />\n                ),\n              }}\n            />\n          </Grid.Column>\n          <Grid.Column width=\"3\">\n            <Statistic.Group widths=\"3\" size=\"tiny\">\n              <Statistic>\n                <Statistic.Value>{active}</Statistic.Value>\n                <Statistic.Label>Active</Statistic.Label>\n              </Statistic>\n              <Statistic>\n                <Statistic.Value>{finished}</Statistic.Value>\n                <Statistic.Label>Finished</Statistic.Label>\n              </Statistic>\n              <Statistic>\n                <Statistic.Value>{total}</Statistic.Value>\n                <Statistic.Label>Total</Statistic.Label>\n              </Statistic>\n            </Statistic.Group>\n          </Grid.Column>\n          <Grid.Column floated=\"right\">\n            <Statistic.Group widths=\"2\" size=\"tiny\">\n              <Statistic>\n                <Statistic.Value>\n                  <Icon name=\"arrow down\" size=\"small\" />\n                  {` ${totalDownloadRate.toFixed(1)} kB/s`}\n                </Statistic.Value>\n              </Statistic>\n              <Statistic>\n                <Statistic.Value>\n                  <Icon name=\"arrow up\" size=\"small\" />\n                  {` ${totalUploadRate.toFixed(1)} kB/s`}\n                </Statistic.Value>\n              </Statistic>\n            </Statistic.Group>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </>\n  );\n};\n\nexport default Statistics;\n","import React, { useState } from 'react';\nimport { Button, Checkbox, Message, Modal, Popup } from 'semantic-ui-react';\n\ninterface ITorrentListProps {\n  torrentIdsToDelete: string[];\n}\n\nconst DeleteTorrentModal = ({ torrentIdsToDelete }: ITorrentListProps): JSX.Element => {\n  const [open, setOpen] = useState(false);\n  const [deleteFiles, setDeleteFiles] = useState(false);\n  const hasSelectedTorrents = torrentIdsToDelete.length !== 0;\n\n  // TODO: handle response\n  // TODO: update list after executing fetch\n  function deleteSelectedTorrents() {\n    torrentIdsToDelete.map((id) => fetch(`/torrents/delete/${id}?files=${deleteFiles}`));\n    setOpen(false);\n  }\n\n  return (\n    <Modal\n      onClose={() => setOpen(false)}\n      open={open}\n      trigger={\n        <Popup\n          trigger={\n            <div style={{ display: 'inline-block' }}>\n              <Button content=\"Delete\" disabled={!hasSelectedTorrents} onClick={(_, _data) => setOpen(true)} />\n            </div>\n          }\n          content=\"Select at least 1 torrent\"\n          disabled={hasSelectedTorrents}\n          closeOnTriggerClick={false}\n          inverted\n        />\n      }\n    >\n      <Modal.Header>Delete Torrent</Modal.Header>\n      <Modal.Content>\n        <Modal.Description>\n          Are you sure?\n          <br />\n          <Message negative>\n            <Checkbox label=\"Also delete files\" onChange={(e, data) => setDeleteFiles(data.checked ?? false)} />\n          </Message>\n        </Modal.Description>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button content=\"No\" icon=\"undo\" onClick={() => setOpen(false)} />\n        <Button content=\"Yes\" icon=\"trash\" color=\"red\" onClick={() => deleteSelectedTorrents()} />\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nexport default DeleteTorrentModal;\n","import React from 'react';\nimport { Button, Form, Icon, Modal } from 'semantic-ui-react';\n\nfunction UploadTorrentModal(): JSX.Element {\n  const [open, setOpen] = React.useState(false);\n  const [uri, setUri] = React.useState('');\n  const [file, setFile] = React.useState<File>();\n\n  async function addTorrent(path: string, additionalData?: [name: string, value: string][]) {\n    const formData = new FormData();\n    formData.append('uri', uri);\n    formData.append('file', file ?? 'null');\n    additionalData?.forEach((x) => formData.append(x[0], x[1]));\n\n    await fetch(path, {\n      method: 'POST',\n      body: formData,\n    });\n    setOpen(false);\n  }\n\n  return (\n    <Modal\n      onClose={() => setOpen(false)}\n      onOpen={() => setOpen(true)}\n      open={open}\n      trigger={\n        <Button icon labelPosition=\"left\" floated=\"right\" primary>\n          <Icon name=\"download\" />\n          Add Torrent\n        </Button>\n      }\n    >\n      <Modal.Header>Add Torrent</Modal.Header>\n      <Modal.Content>\n        <Modal.Description>\n          <Form>\n            <Form.Input placeholder=\"Magnet or Torrent file URL\" onChange={(e) => setUri(e.target.value)} />\n            <Form.Input type=\"file\" accept=\".torrent\" onChange={(e) => setFile(e.target.files?.item(0) ?? undefined)} />\n          </Form>\n        </Modal.Description>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button content=\"Cancel\" color=\"red\" onClick={() => setOpen(false)} />\n        <Button\n          content=\"Add (all files)\"\n          labelPosition=\"left\"\n          icon=\"download\"\n          color=\"yellow\"\n          onClick={() => addTorrent('/torrents/add', [['all', '1']])}\n        />\n        <Button content=\"Add\" labelPosition=\"left\" icon=\"download\" color=\"blue\" onClick={() => addTorrent('/torrents/add')} />\n        <Button content=\"Stream\" labelPosition=\"left\" icon=\"play\" color=\"green\" onClick={() => addTorrent('/playuri')} />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n\nexport default UploadTorrentModal;\n","import React from 'react';\nimport isEqual from 'react-fast-compare';\nimport {\n  Button,\n  ButtonProps,\n  Checkbox,\n  CheckboxProps,\n  Icon,\n  Label,\n  Popup,\n  Progress,\n  Statistic,\n  StatisticGroup,\n  StatisticValue,\n  Table,\n} from 'semantic-ui-react';\nimport { ITorrent } from '../../dataStructure';\n\ninterface ITorrentListItemProps {\n  torrent: ITorrent;\n  isClicked: boolean;\n  isChecked: boolean;\n  onSelect: (_torrentId: string, _isChecked: boolean) => void;\n  onClick: (torrent: ITorrent | undefined) => void;\n}\n\nconst TorrentListItem = ({ torrent, isClicked, isChecked, onSelect, onClick }: ITorrentListItemProps): JSX.Element => {\n  const isActive = torrent.status !== 'Finished' && torrent.status !== 'Paused';\n  const statusLabelColor = isActive ? 'green' : 'grey';\n\n  const onResumePause = async (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) => {\n    event.stopPropagation();\n    const { checked } = data;\n    const action = checked ? 'resume' : 'pause';\n\n    await fetch(`/torrents/${action}/${torrent.id}`);\n  };\n\n  const onCheckboxClick = (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) => {\n    event.stopPropagation();\n    onSelect(torrent.id, data.checked ?? false);\n  };\n\n  const onPlay = async (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, _data: ButtonProps) => {\n    event.stopPropagation();\n    await fetch(`/playuri?resume=${torrent.id}`);\n  };\n\n  return (\n    <>\n      <Table.Row onClick={() => onClick(isClicked ? undefined : torrent)} active={isClicked}>\n        <Table.Cell collapsing textAlign=\"center\">\n          <Checkbox toggle onChange={onResumePause} checked={isActive} />\n        </Table.Cell>\n        <Table.Cell collapsing textAlign=\"center\">\n          <Checkbox checked={isChecked} onChange={onCheckboxClick} />\n        </Table.Cell>\n        <Table.Cell collapsing>\n          <Button color=\"green\" icon=\"play\" floated=\"right\" onClick={onPlay} />\n        </Table.Cell>\n        <Table.Cell>{torrent.name}</Table.Cell>\n        <Table.Cell>\n          <Popup content={`${torrent.progress.toFixed(2)}%`} trigger={<Progress percent={torrent.progress} autoSuccess size=\"small\" />} />\n        </Table.Cell>\n        <Table.Cell collapsing textAlign=\"center\">\n          <Label color={statusLabelColor}>{torrent.status}</Label>\n        </Table.Cell>\n        <Table.Cell>\n          <StatisticGroup size=\"mini\" widths=\"2\">\n            <Statistic value={torrent.ratio.toFixed(2)} label=\"Seed ratio\" />\n            <Popup\n              content={`Seed time: ${torrent.seeding_time}`}\n              trigger={<Statistic value={`${torrent.time_ratio.toFixed(2)}`} label=\"Time ratio\" />}\n            />\n          </StatisticGroup>\n        </Table.Cell>\n        <Table.Cell textAlign=\"center\">\n          <Label>{torrent.size}</Label>\n        </Table.Cell>\n        <Table.Cell>\n          <StatisticGroup widths=\"2\" size=\"mini\">\n            <Statistic>\n              <StatisticValue>\n                <Icon name=\"arrow down\" size=\"small\" />\n                {` ${torrent.download_rate.toFixed(2)} kB/s`}\n              </StatisticValue>\n            </Statistic>\n            <Statistic>\n              <StatisticValue>\n                <Icon name=\"arrow up\" size=\"small\" />\n                {` ${torrent.upload_rate.toFixed(2)} kB/s`}\n              </StatisticValue>\n            </Statistic>\n          </StatisticGroup>\n        </Table.Cell>\n        <Table.Cell>\n          <StatisticGroup widths=\"1\" size=\"mini\">\n            <Statistic value={`${torrent.seeders} / ${torrent.seeders_total}`} label=\"Active / Total\" />\n          </StatisticGroup>\n        </Table.Cell>\n        <Table.Cell>\n          <StatisticGroup widths=\"1\" size=\"mini\">\n            <Statistic value={`${torrent.peers} / ${torrent.peers_total}`} label=\"Active / Total\" />\n          </StatisticGroup>\n        </Table.Cell>\n      </Table.Row>\n    </>\n  );\n};\n\nexport default React.memo(TorrentListItem, isEqual);\n","import React, { FC, useCallback, useState } from 'react';\nimport { Checkbox, Table } from 'semantic-ui-react';\nimport DeleteTorrentModal from '../delete-modal';\nimport UploadTorrentModal from '../upload-modal';\nimport TorrentListItem from './torrent';\nimport { ITorrent } from '../dataStructure';\n\ninterface ITorrentListProps {\n  torrents: ITorrent[];\n  activeTorrent: ITorrent | undefined;\n  onSetActiveTorrent: (_torrentId: ITorrent | undefined) => void;\n}\n\nconst TorrentList: FC<ITorrentListProps> = ({ torrents, activeTorrent, onSetActiveTorrent }: ITorrentListProps) => {\n  const [selectedTorrents, setSelectedTorrents] = useState<string[]>([]);\n\n  const onTorrentSelected = useCallback((torrentId: string, isChecked: boolean) => {\n    if (isChecked) {\n      setSelectedTorrents((st) => [...st, torrentId]);\n    } else {\n      setSelectedTorrents((st) => st.filter((t) => t !== torrentId));\n    }\n  }, []);\n\n  const onAllTorrentsSelected = (isChecked: boolean) => {\n    if (isChecked) {\n      setSelectedTorrents(torrents.map((t) => t.id));\n    } else {\n      setSelectedTorrents([]);\n    }\n  };\n\n  return (\n    <>\n      <Table compact=\"very\" size=\"small\" stackable>\n        <Table.Header className=\"mobile-hidden\">\n          <Table.Row>\n            <Table.HeaderCell />\n            <Table.HeaderCell>\n              <Checkbox\n                onChange={(_, data) => onAllTorrentsSelected(data.checked ?? false)}\n                checked={selectedTorrents.length >= torrents.length}\n              />\n            </Table.HeaderCell>\n            <Table.HeaderCell />\n            <Table.HeaderCell>Name</Table.HeaderCell>\n            <Table.HeaderCell>Progress</Table.HeaderCell>\n            <Table.HeaderCell>Status</Table.HeaderCell>\n            <Table.HeaderCell>Ratios</Table.HeaderCell>\n            <Table.HeaderCell>Size</Table.HeaderCell>\n            <Table.HeaderCell>Rates</Table.HeaderCell>\n            <Table.HeaderCell>Seeds</Table.HeaderCell>\n            <Table.HeaderCell>Peers</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {torrents.map((t) => (\n            <TorrentListItem\n              key={t.id}\n              torrent={t}\n              onSelect={onTorrentSelected}\n              onClick={onSetActiveTorrent}\n              isClicked={activeTorrent?.id === t.id}\n              isChecked={selectedTorrents.includes(t.id)}\n            />\n          ))}\n        </Table.Body>\n        <Table.Footer fullWidth>\n          <Table.Row>\n            <Table.HeaderCell />\n            <Table.HeaderCell colSpan={10}>\n              <UploadTorrentModal />\n              <DeleteTorrentModal torrentIdsToDelete={selectedTorrents} />\n            </Table.HeaderCell>\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n    </>\n  );\n};\n\nexport default TorrentList;\n","import React, { useEffect, useRef } from 'react';\nimport { useDebounce } from 'use-debounce/lib';\nimport useResizeObserver from 'use-resize-observer';\n\ninterface IPieceMapProps {\n  pieces: string;\n}\n\nconst PieceSize = 8;\nconst Margin = 1;\nconst FullSize = PieceSize + Margin;\n\nconst draw = (parentDiv: HTMLDivElement, context: CanvasRenderingContext2D, pieces: string) => {\n  const parentWidth = parentDiv.clientWidth;\n  const piecesPerLine = Math.floor(parentWidth / FullSize);\n  const height = Math.ceil(pieces.length / piecesPerLine) * FullSize;\n\n  const { canvas } = context;\n  canvas.width = parentWidth;\n  canvas.height = height;\n\n  for (let i = 0; i < pieces.length; i += 1) {\n    const pieceColor = pieces[i] === '+' ? '#4CAF50' : '#ECEFF1';\n    context.fillStyle = pieceColor;\n    context.fillRect(FullSize * (i % piecesPerLine), Math.floor(i / piecesPerLine) * FullSize, PieceSize, PieceSize);\n  }\n};\n\nconst PieceMap = ({ pieces }: IPieceMapProps): JSX.Element => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const parentDivRef = useRef<HTMLDivElement>(null);\n  const { width } = useResizeObserver<HTMLDivElement>({ ref: parentDivRef });\n  const [debouncedWidth] = useDebounce(width, 100, { trailing: true });\n\n  useEffect(() => {\n    if (!debouncedWidth) return;\n\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const context = canvas.getContext('2d');\n    if (!context) return;\n\n    const parentDiv = parentDivRef.current;\n    if (!parentDiv) return;\n\n    draw(parentDiv, context, pieces);\n  }, [pieces, debouncedWidth]);\n\n  return (\n    <div ref={parentDivRef}>\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default PieceMap;\n","import React, { useEffect, useState } from 'react';\nimport { Grid, GridColumn, GridRow, List, Tab } from 'semantic-ui-react';\nimport { ITorrent } from '../dataStructure';\nimport { getRefreshRate } from '../Services/settings';\nimport PieceMap from './piece-map';\n\ninterface ITorrentInfoItemProps {\n  torrent: ITorrent;\n}\n\ninterface Tree {\n  [key: string]: Tree;\n}\n\nconst getFileTree = (files: string[][]): Tree => {\n  const tree: Tree = {};\n\n  files.forEach((f) => {\n    let parentNode = tree;\n\n    for (let i = 0; i < f.length; i += 1) {\n      const pathChunk = f[i];\n\n      if (!(pathChunk in parentNode)) {\n        parentNode[pathChunk] = {};\n      }\n\n      parentNode = parentNode[pathChunk];\n    }\n  });\n\n  return tree;\n};\n\nconst renderFileTree = (files: string[][]): JSX.Element => {\n  const renderTree = (tree: Tree): JSX.Element[] =>\n    Object.keys(tree).map((k) => {\n      const isFolder = Object.keys(tree[k]).length > 0;\n\n      return (\n        <List.List key={k}>\n          <List.Item>\n            <List.Icon name={isFolder ? 'folder' : 'file'} />\n            <List.Content>\n              {isFolder ? <List.Header>{k}</List.Header> : <List.Description>{k}</List.Description>}\n              {renderTree(tree[k])}\n            </List.Content>\n          </List.Item>\n        </List.List>\n      );\n    });\n\n  const fileTree = getFileTree(files);\n  return (\n    <List>\n      <List.Item>\n        <List.Content>{renderTree(fileTree)}</List.Content>\n      </List.Item>\n    </List>\n  );\n};\n\nconst TorrentInfo = ({ torrent }: ITorrentInfoItemProps): JSX.Element => {\n  const [filesList, setFilesList] = useState<string[]>([]);\n  const [piecesList, setPiecesList] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    setLoading(true);\n\n    const getInfo = async () => {\n      const regexp = new RegExp(`${torrent.id}.+?Files.+?:\\\\s+(?<files>.+?)\\\\n\\\\n.+?Pieces:\\\\s+(?<pieces>.+?)\\\\n\\\\n\\\\n`, 'gs');\n      const response = await fetch('/info');\n      const info = await response.text();\n      const match = regexp.exec(info);\n      if (!match || !match.groups) return;\n\n      const { files, pieces } = match.groups;\n      setFilesList(files.split('\\n').map((f) => f.trim()));\n      setPiecesList(\n        pieces\n          .split('\\n')\n          .map((p) => p.trim())\n          .join(''),\n      );\n\n      setLoading(false);\n    };\n\n    void getInfo();\n    const intervalHandle = setInterval(() => void getInfo(), getRefreshRate());\n    return () => clearInterval(intervalHandle);\n  }, [torrent.id]);\n\n  const panes = [\n    {\n      menuItem: { key: 'general', content: 'General' },\n      render: () => (\n        <Tab.Pane>\n          <Grid>\n            <GridRow>\n              <GridColumn>\n                <div>\n                  <b>Name:</b> {torrent.name}\n                </div>\n                <div>\n                  <b>Size:</b> {torrent.size}\n                </div>\n              </GridColumn>\n            </GridRow>\n          </Grid>\n        </Tab.Pane>\n      ),\n    },\n    {\n      menuItem: { key: 'files', content: 'Files' },\n      render: () => (\n        <Tab.Pane loading={loading}>\n          <Grid>\n            <GridRow>\n              <GridColumn>{renderFileTree(filesList.map((f) => f.split('/')))}</GridColumn>\n            </GridRow>\n          </Grid>\n        </Tab.Pane>\n      ),\n    },\n    {\n      menuItem: { key: 'pieces', content: 'Pieces' },\n      render: () => (\n        <Tab.Pane loading={loading}>\n          <PieceMap pieces={piecesList} />\n        </Tab.Pane>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <Tab panes={panes} />\n    </>\n  );\n};\n\nexport default TorrentInfo;\n","import React, { useEffect, useState } from 'react';\nimport isEqual from 'react-fast-compare';\nimport HeaderMenu from './menu';\nimport SearchBar from './search-bar';\nimport TorrentList from './torrents-list';\nimport TorrentInfo from './torrent-info';\nimport { ITorrent } from './dataStructure';\nimport 'semantic-ui-css/semantic.min.css';\nimport './style.css';\nimport { getRefreshRate } from './Services/settings';\n\nfunction App(): JSX.Element {\n  const [torrents, setTorrents] = useState<ITorrent[]>([]);\n  const [activeTorrent, setActiveTorrent] = useState<ITorrent>();\n\n  useEffect(() => {\n    const getList = async () => {\n      const response = await fetch('/torrents/list');\n      const fetchedTorrents = (await response.json()) as ITorrent[];\n      setTorrents((t) => (isEqual(t, fetchedTorrents) ? t : fetchedTorrents));\n    };\n\n    void getList();\n    const intervalHandle = setInterval(() => void getList(), getRefreshRate());\n    return () => clearInterval(intervalHandle);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <HeaderMenu />\n      <div>\n        <SearchBar\n          totalDownloadRate={torrents.reduce((rate, item) => rate + item.download_rate, 0)}\n          totalUploadRate={torrents.reduce((rate, item) => rate + item.upload_rate, 0)}\n          active={torrents.filter((t) => t.status !== 'Finished').length}\n          finished={torrents.filter((t) => t.status === 'Finished').length}\n          total={torrents.length}\n        />\n        <TorrentList torrents={torrents} onSetActiveTorrent={setActiveTorrent} activeTorrent={activeTorrent} />\n        {activeTorrent !== undefined && <TorrentInfo torrent={activeTorrent} />}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}